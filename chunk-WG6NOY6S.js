import{$a as Pr,$d as Br,Ab as Rr,S as In,V as kr,_ as Ir,d as Sa,db as Tr,f as Oa,fa as Kr,ia as Kn,ma as An,nc as Mr,qa as Ar}from"./chunk-VBWFNTM6.js";var jr=Sa((Pn,Tn)=>{"use strict";(function($,M){typeof Pn=="object"&&typeof Tn<"u"?Tn.exports=M():typeof define=="function"&&define.amd?define(M):($=typeof globalThis<"u"?globalThis:$||self,$.Dexie=M())})(Pn,function(){"use strict";var $=function(e,t){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},$(e,t)};function M(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var C=function(){return C=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},C.apply(this,arguments)};function Z(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var W=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V=Object.keys,N=Array.isArray;typeof Promise<"u"&&!W.Promise&&(W.Promise=Promise);function H(e,t){return typeof t!="object"||V(t).forEach(function(n){e[n]=t[n]}),e}var X=Object.getPrototypeOf,Ur={}.hasOwnProperty;function q(e,t){return Ur.call(e,t)}function Te(e,t){typeof t=="function"&&(t=t(X(e))),(typeof Reflect>"u"?V:Reflect.ownKeys)(t).forEach(function(n){he(e,n,t[n])})}var Rn=Object.defineProperty;function he(e,t,n,r){Rn(e,t,H(n&&q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Re(e){return{from:function(t){return e.prototype=Object.create(t.prototype),he(e.prototype,"constructor",e),{extend:Te.bind(null,e.prototype)}}}}var Wr=Object.getOwnPropertyDescriptor;function Mn(e,t){var n=Wr(e,t),r;return n||(r=X(e))&&Mn(r,t)}var $r=[].slice;function ot(e,t,n){return $r.call(e,t,n)}function Bn(e,t){return t(e)}function We(e){if(!e)throw new Error("Assertion Failed")}function Fn(e){W.setImmediate?setImmediate(e):setTimeout(e,0)}function Yr(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function se(e,t){if(typeof t=="string"&&q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=se(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var u=e[t.substr(0,o)];return u==null?void 0:se(u,t.substr(o+1))}}function ee(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){We(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)ee(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),u=t.substr(a+1);if(u==="")n===void 0?N(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var s=e[o];(!s||!q(e,o))&&(s=e[o]={}),ee(s,u,n)}}else n===void 0?N(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Qr(e,t){typeof t=="string"?ee(e,t,void 0):"length"in t&&[].map.call(t,function(n){ee(e,n,void 0)})}function jn(e){var t={};for(var n in e)q(e,n)&&(t[n]=e[n]);return t}var Hr=[].concat;function Ln(e){return Hr.apply([],e)}var Gr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ln([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return W[e]}),Nn=new Set(Gr.map(function(e){return W[e]}));function Vn(e){var t={};for(var n in e)if(q(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||Nn.has(r.constructor)?r:Vn(r)}return t}function Xr(e){for(var t in e)if(q(e,t))return!1;return!0}var $e=null;function xe(e){$e=new WeakMap;var t=jt(e);return $e=null,t}function jt(e){if(!e||typeof e!="object")return e;var t=$e.get(e);if(t)return t;if(N(e)){t=[],$e.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(jt(e[n]))}else if(Nn.has(e.constructor))t=e;else{var i=X(e);t=i===Object.prototype?{}:Object.create(i),$e.set(e,t);for(var a in e)q(e,a)&&(t[a]=jt(e[a]))}return t}var qr={}.toString;function Lt(e){return qr.call(e).slice(8,-1)}var Nt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Jr=typeof Nt=="symbol"?function(e){var t;return e!=null&&(t=e[Nt])&&t.apply(e)}:function(){return null};function Ee(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var Me={};function ce(e){var t,n,r,i;if(arguments.length===1){if(N(e))return e.slice();if(this===Me&&typeof e=="string")return[e];if(i=Jr(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Vt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],zn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],zt=Zr.concat(zn),ei={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Be(e,t){this.name=e,this.message=t}Re(Be).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Un(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function ut(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Un(e,t)}Re(ut).from(Be);function Fe(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Un(e,this.failures)}Re(Fe).from(Be);var Ut=zt.reduce(function(e,t){return e[t]=t+"Error",e},{}),ti=Be,K=zt.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=ei[t]||n,this.inner=null)}return Re(r).from(ti),e[t]=r,e},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var Wn=zn.reduce(function(e,t){return e[t+"Error"]=K[t],e},{});function ni(e,t){if(!e||e instanceof Be||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Wn[e.name])return e;var n=new Wn[e.name](t||e.message,e);return"stack"in e&&he(n,"stack",{get:function(){return this.inner.stack}}),n}var st=zt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=K[t]),e},{});st.ModifyError=ut,st.DexieError=Be,st.BulkError=Fe;function j(){}function Ye(e){return e}function ri(e,t){return e==null||e===Ye?t:function(n){return t(e(n))}}function De(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ii(e,t){return e===j?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?De(r,this.onsuccess):r),i&&(this.onerror=this.onerror?De(i,this.onerror):i),a!==void 0?a:n}}function ai(e,t){return e===j?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?De(n,this.onsuccess):n),r&&(this.onerror=this.onerror?De(r,this.onerror):r)}}function oi(e,t){return e===j?t:function(n){var r=e.apply(this,arguments);H(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?De(i,this.onsuccess):i),a&&(this.onerror=this.onerror?De(a,this.onerror):a),r===void 0?o===void 0?void 0:o:H(r,o)}}function ui(e,t){return e===j?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Wt(e,t){return e===j?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var ae=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $n(e,t){ae=e}var Qe={},Yn=100,$t=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,X(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,X(t),e]})(),Qn=$t[0],Hn=$t[1],si=$t[2],ci=Hn&&Hn.then,Se=Qn&&Qn.constructor,Yt=!!si;function li(){queueMicrotask(hi)}var He=function(e,t){Ge.push([e,t]),ct&&(li(),ct=!1)},Qt=!0,ct=!0,Oe=[],lt=[],Ht=Ye,de={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:j,pgp:!1,env:{},finalize:j},k=de,Ge=[],Ce=0,ft=[];function S(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=k;if(typeof e!="function"){if(e!==Qe)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Xt(this,this._value);return}this._state=null,this._value=null,++t.ref,Xn(this,e)}var Gt={get:function(){var e=k,t=pt;function n(r,i){var a=this,o=!e.global&&(e!==k||t!==pt),u=o&&!pe(),s=new S(function(c,h){qt(a,new Gn(Zn(r,e,o,u),Zn(i,e,o,u),c,h,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=Qe,n},set:function(e){he(this,"then",e&&e.prototype===Qe?Gt:{get:function(){return e},set:Gt.set})}};Te(S.prototype,{then:Gt,_then:function(e,t){qt(this,new Gn(null,null,e,t,k))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):ht(r)}):this.then(null,function(r){return r&&r.name===t?n(r):ht(r)})},finally:function(e){return this.then(function(t){return S.resolve(e()).then(function(){return t})},function(t){return S.resolve(e()).then(function(){return ht(t)})})},timeout:function(e,t){var n=this;return e<1/0?new S(function(r,i){var a=setTimeout(function(){return i(new K.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&he(S.prototype,Symbol.toStringTag,"Dexie.Promise"),de.env=Jn();function Gn(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Te(S,{all:function(){var e=ce.apply(null,arguments).map(yt);return new S(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return S.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof S)return e;if(e&&typeof e.then=="function")return new S(function(n,r){e.then(n,r)});var t=new S(Qe,!0,e);return t},reject:ht,race:function(){var e=ce.apply(null,arguments).map(yt);return new S(function(t,n){e.map(function(r){return S.resolve(r).then(t,n)})})},PSD:{get:function(){return k},set:function(e){return k=e}},totalEchoes:{get:function(){return pt}},newPSD:ve,usePSD:ke,scheduler:{get:function(){return He},set:function(e){He=e}},rejectionMapper:{get:function(){return Ht},set:function(e){Ht=e}},follow:function(e,t){return new S(function(n,r){return ve(function(i,a){var o=k;o.unhandleds=[],o.onunhandled=a,o.finalize=De(function(){var u=this;di(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},o.finalize),e()},t,n,r)})}}),Se&&(Se.allSettled&&he(S,"allSettled",function(){var e=ce.apply(null,arguments).map(yt);return new S(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return S.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),Se.any&&typeof AggregateError<"u"&&he(S,"any",function(){var e=ce.apply(null,arguments).map(yt);return new S(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return S.resolve(a).then(function(u){return t(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}),Se.withResolvers&&(S.withResolvers=Se.withResolvers));function Xn(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&je();n&&typeof n.then=="function"?Xn(e,function(i,a){n instanceof S?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,qn(e)),r&&Le()}},Xt.bind(null,e))}catch(n){Xt(e,n)}}function Xt(e,t){if(lt.push(t),e._state===null){var n=e._lib&&je();t=Ht(t),e._state=!1,e._value=t,vi(e),qn(e),n&&Le()}}function qn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)qt(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ce===0&&(++Ce,He(function(){--Ce===0&&Jt()},[]))}function qt(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ce,He(fi,[n,e,t])}function fi(e,t,n){try{var r,i=t._value;!t._state&&lt.length&&(lt=[]),r=ae&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),!t._state&&lt.indexOf(i)===-1&&pi(t),n.resolve(r)}catch(a){n.reject(a)}finally{--Ce===0&&Jt(),--n.psd.ref||n.psd.finalize()}}function hi(){ke(de,function(){je()&&Le()})}function je(){var e=Qt;return Qt=!1,ct=!1,e}function Le(){var e,t,n;do for(;Ge.length>0;)for(e=Ge,Ge=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ge.length>0);Qt=!0,ct=!0}function Jt(){var e=Oe;Oe=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=ft.slice(0),n=t.length;n;)t[--n]()}function di(e){function t(){e(),ft.splice(ft.indexOf(t),1)}ft.push(t),++Ce,He(function(){--Ce===0&&Jt()},[])}function vi(e){Oe.some(function(t){return t._value===e._value})||Oe.push(e)}function pi(e){for(var t=Oe.length;t;)if(Oe[--t]._value===e._value){Oe.splice(t,1);return}}function ht(e){return new S(Qe,!1,e)}function U(e,t){var n=k;return function(){var r=je(),i=k;try{return ye(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{ye(i,!1),r&&Le()}}}var Q={awaits:0,echoes:0,id:0},yi=0,dt=[],vt=0,pt=0,mi=0;function ve(e,t,n,r){var i=k,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++mi,de.env,a.env=Yt?{Promise:S,PromiseProp:{value:S,configurable:!0,writable:!0},all:S.all,race:S.race,allSettled:S.allSettled,any:S.any,resolve:S.resolve,reject:S.reject}:{},t&&H(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=ke(a,e,n,r);return a.ref===0&&a.finalize(),o}function Ne(){return Q.id||(Q.id=++yi),++Q.awaits,Q.echoes+=Yn,Q.id}function pe(){return Q.awaits?(--Q.awaits===0&&(Q.id=0),Q.echoes=Q.awaits*Yn,!0):!1}(""+ci).indexOf("[native code]")===-1&&(Ne=pe=j);function yt(e){return Q.echoes&&e&&e.constructor===Se?(Ne(),e.then(function(t){return pe(),t},function(t){return pe(),Y(t)})):e}function gi(e){++pt,(!Q.echoes||--Q.echoes===0)&&(Q.echoes=Q.awaits=Q.id=0),dt.push(k),ye(e,!0)}function bi(){var e=dt[dt.length-1];dt.pop(),ye(e,!1)}function ye(e,t){var n=k;if((t?Q.echoes&&(!vt++||e!==k):vt&&(!--vt||e!==k))&&queueMicrotask(t?gi.bind(null,e):bi),e!==k&&(k=e,n===de&&(de.env=Jn()),Yt)){var r=de.env.Promise,i=e.env;(n.global||e.global)&&(Object.defineProperty(W,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Jn(){var e=W.Promise;return Yt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(W,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function ke(e,t,n,r,i){var a=k;try{return ye(e,!0),t(n,r,i)}finally{ye(a,!1)}}function Zn(e,t,n,r){return typeof e!="function"?e:function(){var i=k;n&&Ne(),ye(t,!0);try{return e.apply(this,arguments)}finally{ye(i,!1),r&&queueMicrotask(pe)}}}function Zt(e){Promise===Se&&Q.echoes===0?vt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var Y=S.reject;function en(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!k.letThrough&&!e._vip){if(e._state.openComplete)return Y(new K.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return Y(new K.DatabaseClosed);e.open().catch(j)}return e._state.dbReadyPromise.then(function(){return en(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===Ut.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return en(e,t,n,r)})):Y(a)}return i._promise(t,function(a,o){return ve(function(){return k.trans=i,r(a,o,i)})}).then(function(a){if(t==="readwrite")try{i.idbtrans.commit()}catch{}return t==="readonly"?a:i._completion.then(function(){return a})})}}var er="4.2.0",Ie="\uFFFF",tn=-1/0,le="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",tr="String expected.",Ve=[],mt="__dbnames",nn="readonly",rn="readwrite";function Ke(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var nr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function gt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=xe(t),delete t[e]),t}:function(t){return t}}function rr(){throw K.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function B(e,t){try{var n=ir(e),r=ir(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return _i(ar(e),ar(t));case"Array":return wi(e,t)}}catch{}return NaN}function wi(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=B(e[a],t[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function _i(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function ir(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Lt(e);return n==="ArrayBuffer"?"binary":n}function ar(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function bt(e,t,n){var r=e.schema.yProps;return r?(t&&n.numFailures>0&&(t=t.filter(function(i,a){return!n.failures[a]})),Promise.all(r.map(function(i){var a=i.updatesTable;return t?e.db.table(a).where("k").anyOf(t).delete():e.db.table(a).clear()})).then(function(){return n})):n}var or=(function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||k.trans,a=this.name,o=ae&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function u(h,l,v){if(!v.schema[a])throw new K.NotFound("Table "+a+" not part of transaction");return n(v.idbtrans,v)}var s=je();try{var c=i&&i.db._novip===this.db._novip?i===k.trans?i._promise(t,u,r):ve(function(){return i._promise(t,u,r)},{trans:i,transless:k.transless||k}):en(this.db,t,[this.name],u);return o&&(c._consoleTask=o,c=c.catch(function(h){return console.trace(h),Y(h)})),c}finally{s&&Le()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?Y(new K.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(N(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=V(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(h){if(h.compound&&n.every(function(v){return h.keyPath.indexOf(v)>=0})){for(var l=0;l<n.length;++l)if(n.indexOf(h.keyPath[l])===-1)return!1;return!0}return!1}).sort(function(h,l){return h.keyPath.length-l.keyPath.length})[0];if(r&&this.db._maxKey!==Ie){var i=r.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(h){return t[h]}))}!r&&ae&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var a=this.schema.idxByName;function o(h,l){return B(h,l)===0}var u=n.reduce(function(h,l){var v=h[0],_=h[1],f=a[l],d=t[l];return[v||f,v||!f?Ke(_,f&&f.multi?function(p){var g=se(p,l);return N(g)&&g.some(function(b){return o(d,b)})}:function(p){return o(d,se(p,l))}):_]},[null,null]),s=u[0],c=u[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,N(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var n=this,r=n.db,i=n.name;this.schema.mappedClass=t,t.prototype instanceof rr&&(t=(function(s){M(c,s);function c(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),c.prototype.table=function(){return i},c})(t));for(var a=new Set,o=t.prototype;o;o=X(o))Object.getOwnPropertyNames(o).forEach(function(s){return a.add(s)});var u=function(s){if(!s)return s;var c=Object.create(t.prototype);for(var h in s)if(!a.has(h))try{c[h]=s[h]}catch{}return c};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),t},e.prototype.defineClass=function(){function t(n){H(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=gt(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?S.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{ee(t,o,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!N(t)){var r=se(t,this.schema.primKey.keyPath);return r===void 0?Y(new K.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=gt(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?S.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{ee(t,o,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]}).then(function(i){return bt(n,[t],i)}).then(function(i){return i.numFailures?S.reject(i.failures[0]):void 0})})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:nr}).then(function(r){return bt(t,null,r)})}).then(function(n){return n.numFailures?S.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,v=h&&c?t.map(gt(h)):t;return i.core.mutate({trans:u,type:"add",keys:a,values:v,wantResults:o}).then(function(_){var f=_.numFailures,d=_.results,p=_.lastResult,g=_.failures,b=o?d:p;if(f===0)return b;throw new Fe("".concat(i.name,".bulkAdd(): ").concat(f," of ").concat(l," operations failed"),g)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,v=h&&c?t.map(gt(h)):t;return i.core.mutate({trans:u,type:"put",keys:a,values:v,wantResults:o}).then(function(_){var f=_.numFailures,d=_.results,p=_.lastResult,g=_.failures,b=o?d:p;if(f===0)return b;throw new Fe("".concat(i.name,".bulkPut(): ").concat(f," of ").concat(l," operations failed"),g)})})},e.prototype.bulkUpdate=function(t){var n=this,r=this.core,i=t.map(function(u){return u.key}),a=t.map(function(u){return u.changes}),o=[];return this._trans("readwrite",function(u){return r.getMany({trans:u,keys:i,cache:"clone"}).then(function(s){var c=[],h=[];t.forEach(function(v,_){var f=v.key,d=v.changes,p=s[_];if(p){for(var g=0,b=Object.keys(d);g<b.length;g++){var y=b[g],w=d[y];if(y===n.schema.primKey.keyPath){if(B(w,f)!==0)throw new K.Constraint("Cannot update primary key in bulkUpdate()")}else ee(p,y,w)}o.push(_),c.push(f),h.push(p)}});var l=c.length;return r.mutate({trans:u,type:"put",keys:c,values:h,updates:{keys:i,changeSpecs:a}}).then(function(v){var _=v.numFailures,f=v.failures;if(_===0)return l;for(var d=0,p=Object.keys(f);d<p.length;d++){var g=p[d],b=o[Number(g)];if(b!=null){var y=f[g];delete f[g],f[b]=y}}throw new Fe("".concat(n.name,".bulkUpdate(): ").concat(_," of ").concat(l," operations failed"),f)})})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t}).then(function(a){return bt(n,t,a)})}).then(function(i){var a=i.numFailures,o=i.lastResult,u=i.failures;if(a===0)return o;throw new Fe("".concat(n.name,".bulkDelete(): ").concat(a," of ").concat(r," operations failed"),u)})},e})();function Xe(e){var t={},n=function(u,s){if(s){for(var c=arguments.length,h=new Array(c-1);--c;)h[c-1]=arguments[c];return t[u].subscribe.apply(null,h),e}else if(typeof u=="string")return t[u]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(u,s,c){if(typeof u=="object")return o(u);s||(s=ui),c||(c=j);var h={subscribers:[],fire:c,subscribe:function(l){h.subscribers.indexOf(l)===-1&&(h.subscribers.push(l),h.fire=s(h.fire,l))},unsubscribe:function(l){h.subscribers=h.subscribers.filter(function(v){return v!==l}),h.fire=h.subscribers.reduce(s,c)}};return t[u]=n[u]=h,h}function o(u){V(u).forEach(function(s){var c=u[s];if(N(c))a(s,u[s][0],u[s][1]);else if(c==="asap")var h=a(s,Ye,function(){for(var v=arguments.length,_=new Array(v);v--;)_[v]=arguments[v];h.subscribers.forEach(function(f){Fn(function(){f.apply(null,_)})})});else throw new K.InvalidArgument("Invalid event config")})}}function qe(e,t){return Re(t).from({prototype:e}),t}function xi(e){return qe(or.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Xe(null,{creating:[ii,j],reading:[ri,Ye],updating:[oi,j],deleting:[ai,j]})})}function ze(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function an(e,t){e.filter=Ke(e.filter,t)}function on(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ke(r(),t())}:t,e.justLimit=n&&!r}function Ei(e,t){e.isMatch=Ke(e.isMatch,t)}function wt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function ur(e,t,n){var r=wt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function _t(e,t,n,r){var i=e.replayFilter?Ke(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(u,s,c){if(!i||i(s,c,function(v){return s.stop(v)},function(v){return s.fail(v)})){var h=s.primaryKey,l=""+h;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(h)),q(a,l)||(a[l]=!0,t(u,s,c))}};return Promise.all([e.or._iterate(o,n),sr(ur(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return sr(ur(e,r,n),Ke(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function sr(e,t,n,r){var i=r?function(o,u,s){return n(r(o),u,s)}:n,a=U(i);return e.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!t||t(o,function(s){return u=s},function(s){o.stop(s),u=j},function(s){o.fail(s),u=j}))&&a(o.value,o,function(s){return u=s}),u()})})}var Je=(function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var n,r=this["@@propmod"];if(r.add!==void 0){var i=r.add;if(N(i))return Z(Z([],N(t)?t:[],!0),i,!0).sort();if(typeof i=="number")return(Number(t)||0)+i;if(typeof i=="bigint")try{return BigInt(t)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(r.remove!==void 0){var a=r.remove;if(N(a))return N(t)?t.filter(function(u){return!a.includes(u)}).sort():[];if(typeof a=="number")return Number(t)-a;if(typeof a=="bigint")try{return BigInt(t)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}var o=(n=r.replacePrefix)===null||n===void 0?void 0:n[0];return o&&typeof t=="string"&&t.startsWith(o)?r.replacePrefix[1]+t.substring(o.length):t},e})(),Di=(function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,Y.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,Y.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Ke(n.algorithm,t)},e.prototype._iterate=function(t,n){return _t(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&H(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return _t(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(ze(i,!0))return a.count({trans:r,query:{index:wt(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return _t(i,function(){return++o,!1},r,a).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function o(c,h){return h?o(c[r[h]],h-1):c[i]}var u=this._ctx.dir==="next"?1:-1;function s(c,h){var l=o(c,a),v=o(h,a);return B(l,v)*u}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&ze(i,!0)&&i.limit>0){var a=i.valueMapper,o=wt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var u=[];return _t(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,ze(n)?on(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):on(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),on(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return an(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return an(this._ctx,function(n){return t(n.value)}),Ei(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&ze(n,!0)&&n.limit>0)return this._read(function(i){var a=wt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return an(this._ctx,function(i){var a=i.primaryKey.toString(),o=q(r,a);return r[a]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var o=V(t),u=o.length;a=function(y){for(var w=!1,m=0;m<u;++m){var x=o[m],D=t[x],E=se(y,x);D instanceof Je?(ee(y,x,D.execute(E)),w=!0):E!==D&&(ee(y,x,D),w=!0)}return w}}var s=r.table.core,c=s.schema.primaryKey,h=c.outbound,l=c.extractKey,v=200,_=n.db._options.modifyChunkSize;_&&(typeof _=="object"?v=_[s.name]||_["*"]||200:v=_);var f=[],d=0,p=[],g=function(y,w){var m=w.failures,x=w.numFailures;d+=y-x;for(var D=0,E=V(m);D<E.length;D++){var A=E[D];f.push(m[A])}},b=t===cr;return n.clone().primaryKeys().then(function(y){var w=ze(r)&&r.limit===1/0&&(typeof t!="function"||b)&&{index:r.index,range:r.range},m=function(x){var D=Math.min(v,y.length-x),E=y.slice(x,x+D);return(b?Promise.resolve([]):s.getMany({trans:i,keys:E,cache:"immutable"})).then(function(A){var T=[],O=[],R=h?[]:null,I=b?E:[];if(!b)for(var F=0;F<D;++F){var P=A[F],L={value:xe(P),primKey:y[x+F]};a.call(L,L.value,L)!==!1&&(L.value==null?I.push(y[x+F]):!h&&B(l(P),l(L.value))!==0?(I.push(y[x+F]),T.push(L.value)):(O.push(L.value),h&&R.push(y[x+F])))}return Promise.resolve(T.length>0&&s.mutate({trans:i,type:"add",values:T}).then(function(z){for(var ne in z.failures)I.splice(parseInt(ne),1);g(T.length,z)})).then(function(){return(O.length>0||w&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:R,values:O,criteria:w,changeSpec:typeof t!="function"&&t,isAdditionalChunk:x>0}).then(function(z){return g(O.length,z)})}).then(function(){return(I.length>0||w&&b)&&s.mutate({trans:i,type:"delete",keys:I,criteria:w,isAdditionalChunk:x>0}).then(function(z){return bt(r.table,I,z)}).then(function(z){return g(I.length,z)})}).then(function(){return y.length>x+D&&m(x+v)})})};return m(0).then(function(){if(f.length>0)throw new ut("Error modifying one or more objects",f,d,p);return y.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return ze(t)&&!t.table.schema.yProps&&(t.isPrimKey||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var s=u.failures,c=u.numFailures;if(c)throw new ut("Could not delete some values",Object.keys(s).map(function(h){return s[h]}),o-c);return o-c})})}):this.modify(cr)},e})(),cr=function(e,t){return t.value=null};function Si(e){return qe(Di.prototype,function(n,r){this.db=e;var i=nr,a=null;if(r)try{i=r()}catch(c){a=c}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:s!==Ye?s:null}})}function Oi(e,t){return e<t?-1:e===t?0:1}function Ci(e,t){return e>t?-1:e===t?0:1}function te(e,t,n){var r=e instanceof fr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Ue(e){return new e.Collection(e,function(){return lr("")}).limit(0)}function ki(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Ii(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Ki(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),u=-1,s=0;s<o;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],c)<0&&(u=s)}return o<r.length&&a==="next"?e+n.substr(e.length):o<e.length&&a==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function xt(e,t,n,r){var i,a,o,u,s,c,h,l=n.length;if(!n.every(function(d){return typeof d=="string"}))return te(e,tr);function v(d){i=ki(d),a=Ii(d),o=d==="next"?Oi:Ci;var p=n.map(function(g){return{lower:a(g),upper:i(g)}}).sort(function(g,b){return o(g.lower,b.lower)});u=p.map(function(g){return g.upper}),s=p.map(function(g){return g.lower}),c=d,h=d==="next"?"":r}v("next");var _=new e.Collection(e,function(){return me(u[0],s[l-1]+r)});_._ondirectionchange=function(d){v(d)};var f=0;return _._addAlgorithm(function(d,p,g){var b=d.key;if(typeof b!="string")return!1;var y=a(b);if(t(y,s,f))return!0;for(var w=null,m=f;m<l;++m){var x=Ki(b,y,u[m],s[m],o,c);x===null&&w===null?f=m+1:(w===null||o(w,x)>0)&&(w=x)}return p(w!==null?function(){d.continue(w+h)}:g),!1}),_}function me(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function lr(e){return{type:1,lower:e,upper:e}}var fr=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Ue(this):new this.Collection(this,function(){return me(t,n,!r,!i)})}catch{return te(this,le)}},e.prototype.equals=function(t){return t==null?te(this,le):new this.Collection(this,function(){return lr(t)})},e.prototype.above=function(t){return t==null?te(this,le):new this.Collection(this,function(){return me(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?te(this,le):new this.Collection(this,function(){return me(t,void 0,!1)})},e.prototype.below=function(t){return t==null?te(this,le):new this.Collection(this,function(){return me(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?te(this,le):new this.Collection(this,function(){return me(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?te(this,tr):this.between(t,t+Ie,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):xt(this,function(n,r){return n.indexOf(r[0])===0},[t],Ie)},e.prototype.equalsIgnoreCase=function(t){return xt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ce.apply(Me,arguments);return t.length===0?Ue(this):xt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ce.apply(Me,arguments);return t.length===0?Ue(this):xt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Ie)},e.prototype.anyOf=function(){var t=this,n=ce.apply(Me,arguments),r=this._cmp;try{n.sort(r)}catch{return te(this,le)}if(n.length===0)return Ue(this);var i=new this.Collection(this,function(){return me(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,u,s){for(var c=o.key;r(c,n[a])>0;)if(++a,a===n.length)return u(s),!1;return r(c,n[a])===0?!0:(u(function(){o.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[tn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ce.apply(Me,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return te(this,le)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[tn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,u=this._min,s=this._max;if(t.length===0)return Ue(this);if(!t.every(function(m){return m[0]!==void 0&&m[1]!==void 0&&a(m[0],m[1])<=0}))return te(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var c=!n||n.includeLowers!==!1,h=n&&n.includeUppers===!0;function l(m,x){for(var D=0,E=m.length;D<E;++D){var A=m[D];if(i(x[0],A[1])<0&&i(x[1],A[0])>0){A[0]=u(A[0],x[0]),A[1]=s(A[1],x[1]);break}}return D===E&&m.push(x),m}var v=a;function _(m,x){return v(m[0],x[0])}var f;try{f=t.reduce(l,[]),f.sort(_)}catch{return te(this,le)}var d=0,p=h?function(m){return a(m,f[d][1])>0}:function(m){return a(m,f[d][1])>=0},g=c?function(m){return o(m,f[d][0])>0}:function(m){return o(m,f[d][0])>=0};function b(m){return!p(m)&&!g(m)}var y=p,w=new this.Collection(this,function(){return me(f[0][0],f[f.length-1][1],!c,!h)});return w._ondirectionchange=function(m){m==="next"?(y=p,v=a):(y=g,v=o),f.sort(_)},w._addAlgorithm(function(m,x,D){for(var E=m.key;y(E);)if(++d,d===f.length)return x(D),!1;return b(E)?!0:(r._cmp(E,f[d][1])===0||r._cmp(E,f[d][0])===0||x(function(){v===a?m.continue(f[d][0]):m.continue(f[d][1])}),!1)}),w},e.prototype.startsWithAnyOf=function(){var t=ce.apply(Me,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Ue(this):this.inAnyRange(t.map(function(n){return[n,n+Ie]})):te(this,"startsWithAnyOf() only works with strings")},e})();function Ai(e){return qe(fr.prototype,function(n,r,i){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i},this._cmp=this._ascending=B,this._descending=function(a,o){return B(o,a)},this._max=function(a,o){return B(a,o)>0?a:o},this._min=function(a,o){return B(a,o)<0?a:o},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new K.MissingAPI})}function oe(e){return U(function(t){return Ze(t),e(t.target.error),!1})}function Ze(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var et="storagemutated",un="x-storagemutated-1",ge=Xe(null,et),Pi=(function(){function e(){}return e.prototype._lock=function(){return We(!k.global),++this._reculock,this._reculock===1&&!k.global&&(k.lockOwnerFor=this),this},e.prototype._unlock=function(){if(We(!k.global),--this._reculock===0)for(k.global||(k.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ke(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&k.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(We(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new K.DatabaseClosed(i);case"MissingAPIError":throw new K.MissingAPI(i.message,i);default:throw new K.OpenFailed(i)}if(!this.active)throw new K.TransactionInactive;return We(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=U(function(a){Ze(a),n._reject(t.error)}),t.onabort=U(function(a){Ze(a),n.active&&n._reject(new K.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=U(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&ge.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return Y(new K.ReadOnly("Transaction is readonly"));if(!this.active)return Y(new K.TransactionInactive);if(this._locked())return new S(function(o,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,u)},k])});if(r)return ve(function(){var o=new S(function(u,s){i._lock();var c=n(u,s,i);c&&c.then&&c.then(u,s)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new S(function(o,u){var s=n(o,u,i);s&&s.then&&s.then(o,u)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=S.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new S(function(o,u){r.then(function(s){return n._waitingQueue.push(U(o.bind(null,s)))},function(s){return n._waitingQueue.push(U(u.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(q(n,t))return n[t];var r=this.schema[t];if(!r)throw new K.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e})();function Ti(e){return qe(Pi.prototype,function(n,r,i,a,o){var u=this;n!=="readonly"&&r.forEach(function(s){var c,h=(c=i[s])===null||c===void 0?void 0:c.yProps;h&&(r=r.concat(h.map(function(l){return l.updatesTable})))}),this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Xe(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new S(function(s,c){u._resolve=s,u._reject=c}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var c=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):c&&u.idbtrans&&u.idbtrans.abort(),Y(s)})})}function sn(e,t,n,r,i,a,o,u){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+hr(t),type:u}}function hr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function cn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Yr(n,function(r){return[r.name,r]})}}function Ri(e){return e.length===1?e[0]:e}var tt=function(e){try{return e.only([[]]),tt=function(){return[[]]},[[]]}catch{return tt=function(){return Ie},Ie}};function ln(e){return e==null?function(){}:typeof e=="string"?Mi(e):function(t){return se(t,e)}}function Mi(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return se(n,e)}}function dr(e){return[].slice.call(e)}var Bi=0;function nt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Fi(e,t,n){function r(l,v){var _=dr(l.objectStoreNames);return{schema:{name:l.name,tables:_.map(function(f){return v.objectStore(f)}).map(function(f){var d=f.keyPath,p=f.autoIncrement,g=N(d),b=d==null,y={},w={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:g,keyPath:d,autoIncrement:p,unique:!0,extractKey:ln(d)},indexes:dr(f.indexNames).map(function(m){return f.index(m)}).map(function(m){var x=m.name,D=m.unique,E=m.multiEntry,A=m.keyPath,T=N(A),O={name:x,compound:T,keyPath:A,unique:D,multiEntry:E,extractKey:ln(A)};return y[nt(A)]=O,O}),getIndexByKeyPath:function(m){return y[nt(m)]}};return y[":id"]=w.primaryKey,d!=null&&(y[nt(d)]=w.primaryKey),w})},hasGetAll:_.length>0&&"getAll"in v.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var v=l.lower,_=l.upper,f=l.lowerOpen,d=l.upperOpen,p=v===void 0?_===void 0?null:t.upperBound(_,!!d):_===void 0?t.lowerBound(v,!!f):t.bound(v,_,!!f,!!d);return p}function a(l){var v=l.name;function _(p){var g=p.trans,b=p.type,y=p.keys,w=p.values,m=p.range;return new Promise(function(x,D){x=U(x);var E=g.objectStore(v),A=E.keyPath==null,T=b==="put"||b==="add";if(!T&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var O=(y||w||{length:1}).length;if(y&&w&&y.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var R,I=[],F=[],P=0,L=function(ue){++P,Ze(ue)};if(b==="deleteRange"){if(m.type===4)return x({numFailures:P,failures:F,results:[],lastResult:void 0});m.type===3?I.push(R=E.clear()):I.push(R=E.delete(i(m)))}else{var z=T?A?[w,y]:[w,null]:[y,null],ne=z[0],J=z[1];if(T)for(var re=0;re<O;++re)I.push(R=J&&J[re]!==void 0?E[b](ne[re],J[re]):E[b](ne[re])),R.onerror=L;else for(var re=0;re<O;++re)I.push(R=E[b](ne[re])),R.onerror=L}var _e=function(ue){var at=ue.target.result;I.forEach(function(ie,Rt){return ie.error!=null&&(F[Rt]=ie.error)}),x({numFailures:P,failures:F,results:b==="delete"?y:I.map(function(ie){return ie.result}),lastResult:at})};R.onerror=function(ue){L(ue),_e(ue)},R.onsuccess=_e})}function f(p){var g=p.trans,b=p.values,y=p.query,w=p.reverse,m=p.unique;return new Promise(function(x,D){x=U(x);var E=y.index,A=y.range,T=g.objectStore(v),O=E.isPrimaryKey?T:T.index(E.name),R=w?m?"prevunique":"prev":m?"nextunique":"next",I=b||!("openKeyCursor"in O)?O.openCursor(i(A),R):O.openKeyCursor(i(A),R);I.onerror=oe(D),I.onsuccess=U(function(F){var P=I.result;if(!P){x(null);return}P.___id=++Bi,P.done=!1;var L=P.continue.bind(P),z=P.continuePrimaryKey;z&&(z=z.bind(P));var ne=P.advance.bind(P),J=function(){throw new Error("Cursor not started")},re=function(){throw new Error("Cursor not stopped")};P.trans=g,P.stop=P.continue=P.continuePrimaryKey=P.advance=J,P.fail=U(D),P.next=function(){var _e=this,ue=1;return this.start(function(){return ue--?_e.continue():_e.stop()}).then(function(){return _e})},P.start=function(_e){var ue=new Promise(function(ie,Rt){ie=U(ie),I.onerror=oe(Rt),P.fail=Rt,P.stop=function(Da){P.stop=P.continue=P.continuePrimaryKey=P.advance=re,ie(Da)}}),at=function(){if(I.result)try{_e()}catch(ie){P.fail(ie)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return I.onsuccess=U(function(ie){I.onsuccess=at,at()}),P.continue=L,P.continuePrimaryKey=z,P.advance=ne,at(),ue},x(P)},D)})}function d(p){return function(g){return new Promise(function(b,y){b=U(b);var w=g.trans,m=g.values,x=g.limit,D=g.query,E=x===1/0?void 0:x,A=D.index,T=D.range,O=w.objectStore(v),R=A.isPrimaryKey?O:O.index(A.name),I=i(T);if(x===0)return b({result:[]});if(p){var F=m?R.getAll(I,E):R.getAllKeys(I,E);F.onsuccess=function(ne){return b({result:ne.target.result})},F.onerror=oe(y)}else{var P=0,L=m||!("openKeyCursor"in R)?R.openCursor(I):R.openKeyCursor(I),z=[];L.onsuccess=function(ne){var J=L.result;if(!J)return b({result:z});if(z.push(m?J.value:J.primaryKey),++P===x)return b({result:z});J.continue()},L.onerror=oe(y)}})}}return{name:v,schema:l,mutate:_,getMany:function(p){var g=p.trans,b=p.keys;return new Promise(function(y,w){y=U(y);for(var m=g.objectStore(v),x=b.length,D=new Array(x),E=0,A=0,T,O=function(P){var L=P.target;(D[L._pos]=L.result)!=null,++A===E&&y(D)},R=oe(w),I=0;I<x;++I){var F=b[I];F!=null&&(T=m.get(b[I]),T._pos=I,T.onsuccess=O,T.onerror=R,++E)}E===0&&y(D)})},get:function(p){var g=p.trans,b=p.key;return new Promise(function(y,w){y=U(y);var m=g.objectStore(v),x=m.get(b);x.onsuccess=function(D){return y(D.target.result)},x.onerror=oe(w)})},query:d(s),openCursor:f,count:function(p){var g=p.query,b=p.trans,y=g.index,w=g.range;return new Promise(function(m,x){var D=b.objectStore(v),E=y.isPrimaryKey?D:D.index(y.name),A=i(w),T=A?E.count(A):E.count();T.onsuccess=U(function(O){return m(O.target.result)}),T.onerror=oe(x)})}}}var o=r(e,n),u=o.schema,s=o.hasGetAll,c=u.tables.map(function(l){return a(l)}),h={};return c.forEach(function(l){return h[l.name]=l}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(l){var v=h[l];if(!v)throw new Error("Table '".concat(l,"' not found"));return h[l]},MIN_KEY:-1/0,MAX_KEY:tt(t),schema:u}}function ji(e,t){return t.reduce(function(n,r){var i=r.create;return C(C({},n),i(n))},e)}function Li(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=ji(Fi(t,i,r),e.dbcore);return{dbcore:a}}function Et(e,t){var n=t.db,r=Li(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(o){return o.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function Dt(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(o){var u=Mn(o,i);(!u||"value"in u&&u.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?he(o,i,{get:function(){return this.table(i)},set:function(s){Rn(this,i,{value:s,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,a))})})}function fn(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Ni(e,t){return e._cfg.version-t._cfg.version}function Vi(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=cn("$meta",pr("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=k.transless||k;ve(function(){if(k.trans=a,k.transless=u,t===0)V(i).forEach(function(s){dn(n,s,i[s].primKey,i[s].indexes)}),Et(e,n),S.follow(function(){return e.on.populate.fire(a)}).catch(o);else return Et(e,n),Ui(e,a,t).then(function(s){return Wi(e,s,a,n)}).catch(o)})}function zi(e,t){vr(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Ot(e,e.idbdb,t);Ct(e,e._dbSchema,t);for(var r=hn(n,e._dbSchema),i=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var h=t.objectStore(c.name);c.add.forEach(function(l){ae&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(l.src)),St(h,l)})},a=0,o=r.change;a<o.length;a++){var u=o[a],s=i(u);if(typeof s=="object")return s.value}}function Ui(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(r){return r??n}):S.resolve(n)}function Wi(e,t,n,r){var i=[],a=e._versions,o=e._dbSchema=Ot(e,e.idbdb,r),u=a.filter(function(c){return c._cfg.version>=t});if(u.length===0)return S.resolve();u.forEach(function(c){i.push(function(){var h=o,l=c._cfg.dbschema;Ct(e,h,r),Ct(e,l,r),o=e._dbSchema=l;var v=hn(h,l);v.add.forEach(function(b){dn(r,b[0],b[1].primKey,b[1].indexes)}),v.change.forEach(function(b){if(b.recreate)throw new K.Upgrade("Not yet support for changing primary key");var y=r.objectStore(b.name);b.add.forEach(function(w){return St(y,w)}),b.change.forEach(function(w){y.deleteIndex(w.name),St(y,w)}),b.del.forEach(function(w){return y.deleteIndex(w)})});var _=c._cfg.contentUpgrade;if(_&&c._cfg.version>t){Et(e,r),n._memoizedTables={};var f=jn(l);v.del.forEach(function(b){f[b]=h[b]}),fn(e,[e.Transaction.prototype]),Dt(e,[e.Transaction.prototype],V(f),f),n.schema=f;var d=Vt(_);d&&Ne();var p,g=S.follow(function(){if(p=_(n),p&&d){var b=pe.bind(null,null);p.then(b,b)}});return p&&typeof p.then=="function"?S.resolve(p):g.then(function(){return p})}}),i.push(function(h){var l=c._cfg.dbschema;$i(l,h),fn(e,[e.Transaction.prototype]),Dt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),i.push(function(h){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===c._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(l){return l!=="$meta"})):h.objectStore("$meta").put(c._cfg.version,"version"))})});function s(){return i.length?S.resolve(i.shift()(n.idbtrans)).then(s):S.resolve()}return s().then(function(){vr(o,r)})}function hn(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName,c=void 0;for(c in u)s[c]||o.del.push(c);for(c in s){var h=u[c],l=s[c];h?h.src!==l.src&&o.change.push(l):o.add.push(l)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function dn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return St(i,a)}),i}function vr(e,t){V(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ae&&console.debug("Dexie: Creating missing table",n),dn(t,n,e[n].primKey,e[n].indexes))})}function $i(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function St(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Ot(e,t,n){var r={},i=ot(t.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),u=o.keyPath,s=sn(hr(u),u||"",!0,!1,!!o.autoIncrement,u&&typeof u!="string",!0),c=[],h=0;h<o.indexNames.length;++h){var l=o.index(o.indexNames[h]);u=l.keyPath;var v=sn(l.name,u,!!l.unique,!!l.multiEntry,!1,u&&typeof u!="string",!1);c.push(v)}r[a]=cn(a,s,c)}),r}function Yi(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Ot(e,t,n);e._storeNames=ot(t.objectStoreNames,0),Dt(e,[e._allTables],V(r),r)}function Qi(e,t){var n=Ot(e,e.idbdb,t),r=hn(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Ct(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],o=n.objectStore(a);e._hasGetAll="getAll"in o;for(var u=0;u<o.indexNames.length;++u){var s=o.indexNames[u],c=o.index(s).keyPath,h=typeof c=="string"?c:"["+ot(c).join("+")+"]";if(t[a]){var l=t[a].idxByName[h];l&&(l.name=s,delete t[a].idxByName[h],t[a].idxByName[s]=l)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&W.WorkerGlobalScope&&W instanceof W.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function pr(e){return e.split(",").map(function(t,n){var r,i=t.split(":"),a=(r=i[1])===null||r===void 0?void 0:r.trim();t=i[0].trim();var o=t.replace(/([&*]|\+\+)/g,""),u=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return sn(o,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),N(u),n===0,a)})}var Hi=(function(){function e(){}return e.prototype._createTableSchema=function(t,n,r){return cn(t,n,r)},e.prototype._parseIndexSyntax=function(t){return pr(t)},e.prototype._parseStoresSpec=function(t,n){var r=this;V(t).forEach(function(i){if(t[i]!==null){var a=r._parseIndexSyntax(t[i]),o=a.shift();if(!o)throw new K.Schema("Invalid schema for table "+i+": "+t[i]);if(o.unique=!0,o.multi)throw new K.Schema("Primary key cannot be multiEntry*");a.forEach(function(s){if(s.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")});var u=r._createTableSchema(i,o,a);n[i]=u}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?H(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(o){H(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,fn(n,[n._allTables,n,n.Transaction.prototype]),Dt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],V(a),a),n._storeNames=V(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Wt(this._cfg.contentUpgrade||j,t),this},e})();function Gi(e){return qe(Hi.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function vn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new fe(mt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function pn(e){return e&&typeof e.databases=="function"}function Xi(e){var t=e.indexedDB,n=e.IDBKeyRange;return pn(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==mt})}):vn(t,n).toCollection().primaryKeys()}function qi(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!pn(n)&&t!==mt&&vn(n,r).put({name:t}).catch(j)}function Ji(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!pn(n)&&t!==mt&&vn(n,r).delete(t).catch(j)}function yn(e){return ve(function(){return k.letThrough=!0,e()})}function Zi(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}var mn;function gn(e){return!("from"in e)}var G=function(e,t){if(this)H(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new G;return e&&"d"in e&&H(n,e),n}};Te(G.prototype,(mn={add:function(e){return it(this,e),this},addKey:function(e){return rt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return rt(t,n,n)}),this},hasKey:function(e){var t=kt(this).next(e).value;return t&&B(t.from,e)<=0&&B(t.to,e)>=0}},mn[Nt]=function(){return kt(this)},mn));function rt(e,t,n){var r=B(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(gn(e))return H(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(B(n,e.from)<0)return i?rt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},mr(e);if(B(t,e.to)>0)return a?rt(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},mr(e);B(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),B(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&it(e,i),a&&o&&it(e,a)}}function it(e,t){function n(r,i){var a=i.from,o=i.to,u=i.l,s=i.r;rt(r,a,o),u&&n(r,u),s&&n(r,s)}gn(t)||n(e,t)}function yr(e,t){var n=kt(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=kt(e),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(B(u.from,i.to)<=0&&B(u.to,i.from)>=0)return!0;B(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function kt(e){var t=gn(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&B(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||B(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function mr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=C({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],o[i]=u[a],e[a]=o,o.d=gr(o)}e.d=gr(e)}function gr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function It(e,t){return V(t).forEach(function(n){e[n]?it(e[n],t[n]):e[n]=Vn(t[n])}),e}function bn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&yr(t[n],e[n])})}var Ae={},wn={},_n=!1;function Kt(e,t){It(wn,e),_n||(_n=!0,setTimeout(function(){_n=!1;var n=wn;wn={},xn(n,!1)},0))}function xn(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Ae);r<i.length;r++){var a=i[r];br(a,e,n,t)}else for(var o in e){var u=/^idb\:\/\/(.*)\/(.*)\//.exec(o);if(u){var s=u[1],c=u[2],a=Ae["idb://".concat(s,"/").concat(c)];a&&br(a,e,n,t)}}n.forEach(function(h){return h()})}function br(e,t,n,r){for(var i=[],a=0,o=Object.entries(e.queries.query);a<o.length;a++){for(var u=o[a],s=u[0],c=u[1],h=[],l=0,v=c;l<v.length;l++){var _=v[l];bn(t,_.obsSet)?_.subscribers.forEach(function(g){return n.add(g)}):r&&h.push(_)}r&&i.push([s,h])}if(r)for(var f=0,d=i;f<d.length;f++){var p=d[f],s=p[0],h=p[1];e.queries.query[s]=h}}function ea(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Y(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(e.verno*10),a=!1;function o(){if(t.openCanceller!==r)throw new K.DatabaseClosed("db.open() was cancelled")}var u=t.dbReadyResolve,s=null,c=!1,h=function(){return new S(function(l,v){if(o(),!n)throw new K.MissingAPI;var _=e.name,f=t.autoSchema||!i?n.open(_):n.open(_,i);if(!f)throw new K.MissingAPI;f.onerror=oe(v),f.onblocked=U(e._fireOnBlocked),f.onupgradeneeded=U(function(d){if(s=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=Ze,s.abort(),f.result.close();var p=n.deleteDatabase(_);p.onsuccess=p.onerror=U(function(){v(new K.NoSuchDatabase("Database ".concat(_," doesnt exist")))})}else{s.onerror=oe(v);var g=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;c=g<1,e.idbdb=f.result,a&&zi(e,s),Vi(e,g/10,s,v)}},v),f.onsuccess=U(function(){s=null;var d=e.idbdb=f.result,p=ot(d.objectStoreNames);if(p.length>0)try{var g=d.transaction(Ri(p),"readonly");if(t.autoSchema)Yi(e,d,g);else if(Ct(e,e._dbSchema,g),!Qi(e,g)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),d.close(),i=d.version+1,a=!0,l(h());Et(e,g)}catch{}Ve.push(e),d.onversionchange=U(function(b){t.vcFired=!0,e.on("versionchange").fire(b)}),d.onclose=U(function(b){e.on("close").fire(b)}),c&&qi(e._deps,_),l()},v)}).catch(function(l){switch(l?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h();break;case"VersionError":if(i>0)return i=0,h();break}return S.reject(l)})};return S.race([r,(typeof navigator>"u"?S.resolve():Zi()).then(h)]).then(function(){return o(),t.onReadyBeingFired=[],S.resolve(yn(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var v=t.onReadyBeingFired.reduce(Wt,j);return t.onReadyBeingFired=[],S.resolve(yn(function(){return v(e.vip)})).then(l)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(l){t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),Y(l)}).finally(function(){t.openComplete=!0,u()}).then(function(){if(c){var l={};e.tables.forEach(function(v){v.schema.indexes.forEach(function(_){_.name&&(l["idb://".concat(e.name,"/").concat(v.name,"/").concat(_.name)]=new G(-1/0,[[[]]]))}),l["idb://".concat(e.name,"/").concat(v.name,"/")]=l["idb://".concat(e.name,"/").concat(v.name,"/:dels")]=new G(-1/0,[[[]]])}),ge(et).fire(l),xn(l,!0)}return e})}function En(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=a(t),i=a(n);function a(o){return function(u){var s=o(u),c=s.value;return s.done?c:!c||typeof c.then!="function"?N(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(t)()}function ta(e,t,n){var r=arguments.length;if(r<2)throw new K.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Ln(i);return[e,a,n]}function wr(e,t,n,r,i){return S.resolve().then(function(){var a=k.transless||k,o=e._createTransaction(t,n,e._dbSchema,r);o.explicit=!0;var u={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(l){return l.name===Ut.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return wr(e,t,n,null,i)})):Y(l)}var s=Vt(i);s&&Ne();var c,h=S.follow(function(){if(c=i.call(o,o),c)if(s){var l=pe.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=En(c))},u);return(c&&typeof c.then=="function"?S.resolve(c).then(function(l){return o.active?l:Y(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return c})).then(function(l){return r&&o._resolve(),o._completion.then(function(){return l})}).catch(function(l){return o._reject(l),Y(l)})})}function At(e,t,n){for(var r=N(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function na(e){return C(C({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(d,p,g){var b=nt(d),y=i[b]=i[b]||[],w=d==null?0:typeof d=="string"?1:d.length,m=p>0,x=C(C({},g),{name:m?"".concat(b,"(virtual-from:").concat(g.name,")"):g.name,lowLevelIndex:g,isVirtual:m,keyTail:p,keyLength:w,extractKey:ln(d),unique:!m&&g.unique});if(y.push(x),x.isPrimaryKey||a.push(x),w>1){var D=w===2?d[0]:d.slice(0,w-1);o(D,p+1,g)}return y.sort(function(E,A){return E.keyTail-A.keyTail}),x}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var h=c[s];o(h.keyPath,0,h)}function l(d){var p=i[nt(d)];return p&&p[0]}function v(d,p){return{type:d.type===1?2:d.type,lower:At(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,p),lowerOpen:!0,upper:At(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,p),upperOpen:!0}}function _(d){var p=d.query.index;return p.isVirtual?C(C({},d),{query:{index:p.lowLevelIndex,range:v(d.query.range,p.keyTail)}}):d}var f=C(C({},n),{schema:C(C({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:l}),count:function(d){return n.count(_(d))},query:function(d){return n.query(_(d))},openCursor:function(d){var p=d.query.index,g=p.keyTail,b=p.isVirtual,y=p.keyLength;if(!b)return n.openCursor(d);function w(m){function x(E){E!=null?m.continue(At(E,d.reverse?e.MAX_KEY:e.MIN_KEY,g)):d.unique?m.continue(m.key.slice(0,y).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,g)):m.continue()}var D=Object.create(m,{continue:{value:x},continuePrimaryKey:{value:function(E,A){m.continuePrimaryKey(At(E,e.MAX_KEY,g),A)}},primaryKey:{get:function(){return m.primaryKey}},key:{get:function(){var E=m.key;return y===1?E[0]:E.slice(0,y)}},value:{get:function(){return m.value}}});return D}return n.openCursor(_(d)).then(function(m){return m&&w(m)})}});return f}})}var ra={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:na};function Dn(e,t,n,r){return n=n||{},r=r||"",V(e).forEach(function(i){if(!q(t,i))n[r+i]=void 0;else{var a=e[i],o=t[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var u=Lt(a),s=Lt(o);u!==s?n[r+i]=t[i]:u==="Object"?Dn(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i])}else a!==o&&(n[r+i]=t[i])}}),V(t).forEach(function(i){q(e,i)||(n[r+i]=t[i])}),n}function Sn(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ia={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return C(C({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=C(C({},n),{mutate:function(a){var o=k.trans,u=o.table(t).hook,s=u.deleting,c=u.creating,h=u.updating;switch(a.type){case"add":if(c.fire===j)break;return o._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===j&&h.fire===j)break;return o._promise("readwrite",function(){return l(a)},!0);case"delete":if(s.fire===j)break;return o._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(s.fire===j)break;return o._promise("readwrite",function(){return v(a)},!0)}return n.mutate(a);function l(f){var d=k.trans,p=f.keys||Sn(r,f);if(!p)throw new Error("Keys missing");return f=f.type==="add"||f.type==="put"?C(C({},f),{keys:p}):C({},f),f.type!=="delete"&&(f.values=Z([],f.values,!0)),f.keys&&(f.keys=Z([],f.keys,!0)),aa(n,f,p).then(function(g){var b=p.map(function(y,w){var m=g[w],x={onerror:null,onsuccess:null};if(f.type==="delete")s.fire.call(x,y,m,d);else if(f.type==="add"||m===void 0){var D=c.fire.call(x,y,f.values[w],d);y==null&&D!=null&&(y=D,f.keys[w]=y,r.outbound||ee(f.values[w],r.keyPath,y))}else{var E=Dn(m,f.values[w]),A=h.fire.call(x,E,y,m,d);if(A){var T=f.values[w];Object.keys(A).forEach(function(O){q(T,O)?T[O]=A[O]:ee(T,O,A[O])})}}return x});return n.mutate(f).then(function(y){for(var w=y.failures,m=y.results,x=y.numFailures,D=y.lastResult,E=0;E<p.length;++E){var A=m?m[E]:p[E],T=b[E];A==null?T.onerror&&T.onerror(w[E]):T.onsuccess&&T.onsuccess(f.type==="put"&&g[E]?f.values[E]:A)}return{failures:w,results:m,numFailures:x,lastResult:D}}).catch(function(y){return b.forEach(function(w){return w.onerror&&w.onerror(y)}),Promise.reject(y)})})}function v(f){return _(f.trans,f.range,1e4)}function _(f,d,p){return n.query({trans:f,values:!1,query:{index:r,range:d},limit:p}).then(function(g){var b=g.result;return l({type:"delete",keys:b,trans:f}).then(function(y){return y.numFailures>0?Promise.reject(y.failures[0]):b.length<p?{failures:[],numFailures:0,lastResult:void 0}:_(f,C(C({},d),{lower:b[b.length-1],lowerOpen:!0}),p)})})}}});return i}})}};function aa(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function _r(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)B(t.keys[i],e[a])===0&&(r.push(n?xe(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var oa={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return C(C({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=_r(r.keys,r.trans._cache,r.cache==="clone");return i?S.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?xe(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function xr(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Er(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var ua={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new G(e.MIN_KEY,e.MAX_KEY);return C(C({},e),{transaction:function(r,i,a){if(k.subscr&&i!=="readonly")throw new K.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(k.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,u=a.indexes,s=o.extractKey,c=o.outbound,h=o.autoIncrement&&u.filter(function(f){return f.compound&&f.keyPath.includes(o.keyPath)}),l=C(C({},i),{mutate:function(f){var d,p,g=f.trans,b=f.mutatedParts||(f.mutatedParts={}),y=function(I){var F="idb://".concat(t,"/").concat(r,"/").concat(I);return b[F]||(b[F]=new G)},w=y(""),m=y(":dels"),x=f.type,D=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[Sn(o,f).filter(function(I){return I}),f.values]:[],E=D[0],A=D[1],T=f.trans._cache;if(N(E)){w.addKeys(E);var O=x==="delete"||E.length===A.length?_r(E,T):null;O||m.addKeys(E),(O||A)&&sa(y,a,O,A)}else if(E){var R={from:(d=E.lower)!==null&&d!==void 0?d:e.MIN_KEY,to:(p=E.upper)!==null&&p!==void 0?p:e.MAX_KEY};m.add(R),w.add(R)}else w.add(n),m.add(n),a.indexes.forEach(function(I){return y(I.name).add(n)});return i.mutate(f).then(function(I){return E&&(f.type==="add"||f.type==="put")&&(w.addKeys(I.results),h&&h.forEach(function(F){for(var P=f.values.map(function(J){return F.extractKey(J)}),L=F.keyPath.findIndex(function(J){return J===o.keyPath}),z=0,ne=I.results.length;z<ne;++z)P[z][L]=I.results[z];y(F.name).addKeys(P)})),g.mutatedParts=It(g.mutatedParts||{},b),I})}}),v=function(f){var d,p,g=f.query,b=g.index,y=g.range;return[b,new G((d=y.lower)!==null&&d!==void 0?d:e.MIN_KEY,(p=y.upper)!==null&&p!==void 0?p:e.MAX_KEY)]},_={get:function(f){return[o,new G(f.key)]},getMany:function(f){return[o,new G().addKeys(f.keys)]},count:v,query:v,openCursor:v};return V(_).forEach(function(f){l[f]=function(d){var p=k.subscr,g=!!p,b=xr(k,i)&&Er(f,d),y=b?d.obsSet={}:p;if(g){var w=function(O){var R="idb://".concat(t,"/").concat(r,"/").concat(O);return y[R]||(y[R]=new G)},m=w(""),x=w(":dels"),D=_[f](d),E=D[0],A=D[1];if(f==="query"&&E.isPrimaryKey&&!d.values?x.add(A):w(E.name||"").add(A),!E.isPrimaryKey)if(f==="count")x.add(n);else{var T=f==="query"&&c&&d.values&&i.query(C(C({},d),{values:!1}));return i[f].apply(this,arguments).then(function(O){if(f==="query"){if(c&&d.values)return T.then(function(P){var L=P.result;return m.addKeys(L),O});var R=d.values?O.result.map(s):O.result;d.values?m.addKeys(R):x.addKeys(R)}else if(f==="openCursor"){var I=O,F=d.values;return I&&Object.create(I,{key:{get:function(){return x.addKey(I.primaryKey),I.key}},primaryKey:{get:function(){var P=I.primaryKey;return x.addKey(P),P}},value:{get:function(){return F&&m.addKey(I.primaryKey),I.value}}})}return O})}}return i[f].apply(this,arguments)}}),l}})}};function sa(e,t,n,r){function i(a){var o=e(a.name||"");function u(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&N(c)?c.forEach(function(h){return o.addKey(h)}):o.addKey(c)};(n||r).forEach(function(c,h){var l=n&&u(n[h]),v=r&&u(r[h]);B(l,v)!==0&&(l!=null&&s(l),v!=null&&s(v))})}t.indexes.forEach(i)}function Dr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===r)return null;var i=C({},t);return N(i.keys)&&(i.keys=i.keys.filter(function(a,o){return!(o in n.failures)})),"values"in i&&N(i.values)&&(i.values=i.values.filter(function(a,o){return!(o in n.failures)})),i}function ca(e,t){return t.lower===void 0?!0:t.lowerOpen?B(e,t.lower)>0:B(e,t.lower)>=0}function la(e,t){return t.upper===void 0?!0:t.upperOpen?B(e,t.upper)<0:B(e,t.upper)<=0}function On(e,t){return ca(e,t)&&la(e,t)}function Sr(e,t,n,r,i,a){if(!n||n.length===0)return e;var o=t.query.index,u=o.multiEntry,s=t.query.range,c=r.schema.primaryKey,h=c.extractKey,l=o.extractKey,v=(o.lowLevelIndex||o).extractKey,_=n.reduce(function(f,d){var p=f,g=[];if(d.type==="add"||d.type==="put")for(var b=new G,y=d.values.length-1;y>=0;--y){var w=d.values[y],m=h(w);if(!b.hasKey(m)){var x=l(w);(u&&N(x)?x.some(function(O){return On(O,s)}):On(x,s))&&(b.addKey(m),g.push(w))}}switch(d.type){case"add":{var D=new G().addKeys(t.values?f.map(function(O){return h(O)}):f);p=f.concat(t.values?g.filter(function(O){var R=h(O);return D.hasKey(R)?!1:(D.addKey(R),!0)}):g.map(function(O){return h(O)}).filter(function(O){return D.hasKey(O)?!1:(D.addKey(O),!0)}));break}case"put":{var E=new G().addKeys(d.values.map(function(O){return h(O)}));p=f.filter(function(O){return!E.hasKey(t.values?h(O):O)}).concat(t.values?g:g.map(function(O){return h(O)}));break}case"delete":var A=new G().addKeys(d.keys);p=f.filter(function(O){return!A.hasKey(t.values?h(O):O)});break;case"deleteRange":var T=d.range;p=f.filter(function(O){return!On(h(O),T)});break}return p},e);return _===e?e:(_.sort(function(f,d){return B(v(f),v(d))||B(h(f),h(d))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(i.dirty=!0)),a?Object.freeze(_):_)}function Or(e,t){return B(e.lower,t.lower)===0&&B(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function fa(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var i=B(e,t);if(i===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function ha(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var i=B(e,t);if(i===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function da(e,t){return fa(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&ha(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function va(e,t,n,r){var i=Ae["idb://".concat(e,"/").concat(t)];if(!i)return[];var a=i.queries[n];if(!a)return[null,!1,i,null];var o=r.query?r.query.index.name:null,u=a[o||""];if(!u)return[null,!1,i,null];switch(n){case"query":var s=u.find(function(l){return l.req.limit===r.limit&&l.req.values===r.values&&Or(l.req.query.range,r.query.range)});if(s)return[s,!0,i,u];var c=u.find(function(l){var v="limit"in l.req?l.req.limit:1/0;return v>=r.limit&&(r.values?l.req.values:!0)&&da(l.req.query.range,r.query.range)});return[c,!1,i,u];case"count":var h=u.find(function(l){return Or(l.req.query.range,r.query.range)});return[h,!!h,i,u]}}function pa(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&ya(e,t)})}function ya(e,t){setTimeout(function(){e.subscribers.size===0&&Ee(t,e)},3e3)}var ma={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=C(C({},e),{transaction:function(r,i,a){var o=e.transaction(r,i,a);if(i==="readwrite"){var u=new AbortController,s=u.signal,c=function(h){return function(){if(u.abort(),i==="readwrite"){for(var l=new Set,v=0,_=r;v<_.length;v++){var f=_[v],d=Ae["idb://".concat(t,"/").concat(f)];if(d){var p=e.table(f),g=d.optimisticOps.filter(function(F){return F.trans===o});if(o._explicit&&h&&o.mutatedParts)for(var b=0,y=Object.values(d.queries.query);b<y.length;b++)for(var w=y[b],m=0,x=w.slice();m<x.length;m++){var D=x[m];bn(D.obsSet,o.mutatedParts)&&(Ee(w,D),D.subscribers.forEach(function(F){return l.add(F)}))}else if(g.length>0){d.optimisticOps=d.optimisticOps.filter(function(F){return F.trans!==o});for(var E=0,A=Object.values(d.queries.query);E<A.length;E++)for(var w=A[E],T=0,O=w.slice();T<O.length;T++){var D=O[T];if(D.res!=null&&o.mutatedParts)if(h&&!D.dirty){var R=Object.isFrozen(D.res),I=Sr(D.res,D.req,g,p,D,R);D.dirty?(Ee(w,D),D.subscribers.forEach(function(L){return l.add(L)})):I!==D.res&&(D.res=I,D.promise=S.resolve({result:I}))}else D.dirty&&Ee(w,D),D.subscribers.forEach(function(L){return l.add(L)})}}}}l.forEach(function(F){return F()})}}};o.addEventListener("abort",c(!1),{signal:s}),o.addEventListener("error",c(!1),{signal:s}),o.addEventListener("complete",c(!0),{signal:s})}return o},table:function(r){var i=e.table(r),a=i.schema.primaryKey,o=C(C({},i),{mutate:function(u){var s=k.trans;if(a.outbound||s.db._options.cache==="disabled"||s.explicit||s.idbtrans.mode!=="readwrite")return i.mutate(u);var c=Ae["idb://".concat(t,"/").concat(r)];if(!c)return i.mutate(u);var h=i.mutate(u);return(u.type==="add"||u.type==="put")&&(u.values.length>=50||Sn(a,u).some(function(l){return l==null}))?h.then(function(l){var v=C(C({},u),{values:u.values.map(function(f,d){var p;if(l.failures[d])return f;var g=!((p=a.keyPath)===null||p===void 0)&&p.includes(".")?xe(f):C({},f);return ee(g,a.keyPath,l.results[d]),g})}),_=Dr(c,v,l);c.optimisticOps.push(_),queueMicrotask(function(){return u.mutatedParts&&Kt(u.mutatedParts)})}):(c.optimisticOps.push(u),u.mutatedParts&&Kt(u.mutatedParts),h.then(function(l){if(l.numFailures>0){Ee(c.optimisticOps,u);var v=Dr(c,u,l);v&&c.optimisticOps.push(v),u.mutatedParts&&Kt(u.mutatedParts)}}),h.catch(function(){Ee(c.optimisticOps,u),u.mutatedParts&&Kt(u.mutatedParts)})),h},query:function(u){var s;if(!xr(k,i)||!Er("query",u))return i.query(u);var c=((s=k.trans)===null||s===void 0?void 0:s.db._options.cache)==="immutable",h=k,l=h.requery,v=h.signal,_=va(t,r,"query",u),f=_[0],d=_[1],p=_[2],g=_[3];if(f&&d)f.obsSet=u.obsSet;else{var b=i.query(u).then(function(y){var w=y.result;if(f&&(f.res=w),c){for(var m=0,x=w.length;m<x;++m)Object.freeze(w[m]);Object.freeze(w)}else y.result=xe(w);return y}).catch(function(y){return g&&f&&Ee(g,f),Promise.reject(y)});f={obsSet:u.obsSet,promise:b,subscribers:new Set,type:"query",req:u,dirty:!1},g?g.push(f):(g=[f],p||(p=Ae["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),p.queries.query[u.query.index.name||""]=g)}return pa(f,g,l,v),f.promise.then(function(y){return{result:Sr(y.result,u,p?.optimisticOps,i,f,c)}})}});return o}});return n}};function Pt(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var fe=(function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=C({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:j,dbReadyPromise:null,cancelOpen:j,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};o.dbReadyPromise=new S(function(s){o.dbReadyResolve=s}),o.openCanceller=new S(function(s,c){o.cancelOpen=c}),this._state=o,this.name=t,this.on=Xe(this,"populate","blocked","versionchange","close",{ready:[Wt,j]}),this.once=function(s,c){var h=function(){for(var l=[],v=0;v<arguments.length;v++)l[v]=arguments[v];r.on(s).unsubscribe(h),c.apply(r,l)};return r.on(s,h)},this.on.ready.subscribe=Bn(this.on.ready.subscribe,function(s){return function(c,h){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||S.resolve().then(c),h&&s(c);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(c),h&&s(c);else{s(c);var v=r;h||s(function _(){v.on.ready.unsubscribe(c),v.on.ready.unsubscribe(_)})}})}}),this.Collection=Si(this),this.Table=xi(this),this.Transaction=Ti(this),this.Version=Gi(this),this.WhereClause=Ai(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(s.oldVersion/10))}),this._maxKey=tt(n.IDBKeyRange),this._createTransaction=function(s,c,h,l){return new r.Transaction(s,c,h,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),Ve.filter(function(c){return c.name===r.name&&c!==r&&!c._state.vcFired}).map(function(c){return c.on("versionchange").fire(s)})},this.use(oa),this.use(ma),this.use(ua),this.use(ra),this.use(ia);var u=new Proxy(this,{get:function(s,c,h){if(c==="_vip")return!0;if(c==="table")return function(v){return Pt(r.table(v),u)};var l=Reflect.get(s,c,h);return l instanceof or?Pt(l,u):c==="tables"?l.map(function(v){return Pt(v,u)}):c==="_createTransaction"?function(){var v=l.apply(this,arguments);return Pt(v,u)}:l}});this.vip=u,a.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new K.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Ni),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||k.letThrough||this._vip)?t():new S(function(r,i){if(n._state.openComplete)return i(new K.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen){i(new K.DatabaseClosed);return}n.open().catch(j)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i??10,name:a}),o.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){var t=this;return ke(de,function(){return ea(t)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,n=Ve.indexOf(this);if(n>=0&&Ve.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new S(function(r){t.dbReadyResolve=r}),t.openCanceller=new S(function(r,i){t.cancelOpen=i}))},e.prototype.close=function(t){var n=t===void 0?{disableAutoOpen:!0}:t,r=n.disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new K.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new K.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},e.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var r=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new S(function(a,o){var u=function(){n.close(t);var s=n._deps.indexedDB.deleteDatabase(n.name);s.onsuccess=U(function(){Ji(n._deps,n.name),a()}),s.onerror=oe(o),s.onblocked=n._fireOnBlocked};if(r)throw new K.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(u):u()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return V(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=ta.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=k.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(h){var l=h instanceof i.Table?h.name:h;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===nn)u=nn;else if(t=="rw"||t==rn)u=rn;else throw new K.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===nn&&u===rn)if(o)a=null;else throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(h){if(a&&a.storeNames.indexOf(h)===-1)if(o)a=null;else throw new K.SubTransaction("Table "+h+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(h){return a?a._promise(null,function(l,v){v(h)}):Y(h)}var c=wr.bind(null,this,u,s,a,r);return a?a._promise(u,c,"lock"):k.trans?ke(k.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!q(this._allTables,t))throw new K.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e})(),ga=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ba=(function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[ga]=function(){return this},e})(),Tt;try{Tt={indexedDB:W.indexedDB||W.mozIndexedDB||W.webkitIndexedDB||W.msIndexedDB,IDBKeyRange:W.IDBKeyRange||W.webkitIDBKeyRange}}catch{Tt={indexedDB:null,IDBKeyRange:null}}function Cr(e){var t=!1,n,r=new ba(function(i){var a=Vt(e);function o(g){var b=je();try{a&&Ne();var y=ve(e,g);return a&&(y=y.finally(pe)),y}finally{b&&Le()}}var u=!1,s,c={},h={},l={get closed(){return u},unsubscribe:function(){u||(u=!0,s&&s.abort(),v&&ge.storagemutated.unsubscribe(d))}};i.start&&i.start(l);var v=!1,_=function(){return Zt(p)};function f(){return bn(h,c)}var d=function(g){It(c,g),f()&&_()},p=function(){if(!(u||!Tt.indexedDB)){c={};var g={};s&&s.abort(),s=new AbortController;var b={subscr:g,signal:s.signal,requery:_,querier:e,trans:null},y=o(b);Promise.resolve(y).then(function(w){t=!0,n=w,!(u||b.signal.aborted)&&(c={},h=g,!Xr(h)&&!v&&(ge(et,d),v=!0),Zt(function(){return!u&&i.next&&i.next(w)}))},function(w){t=!1,["DatabaseClosedError","AbortError"].includes(w?.name)||u||Zt(function(){u||i.error&&i.error(w)})})}};return setTimeout(_,0),l});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var Pe=fe;Te(Pe,C(C({},st),{delete:function(e){var t=new Pe(e,{addons:[]});return t.delete()},exists:function(e){return new Pe(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Xi(Pe.dependencies).then(e)}catch{return Y(new K.MissingAPI)}},defineClass:function(){function e(t){H(this,t)}return e},ignoreTransaction:function(e){return k.trans?ke(k.transless,e):e()},vip:yn,async:function(e){return function(){try{var t=En(e.apply(this,arguments));return!t||typeof t.then!="function"?S.resolve(t):t}catch(n){return Y(n)}}},spawn:function(e,t,n){try{var r=En(e.apply(n,t||[]));return!r||typeof r.then!="function"?S.resolve(r):r}catch(i){return Y(i)}},currentTransaction:{get:function(){return k.trans||null}},waitFor:function(e,t){var n=S.resolve(typeof e=="function"?Pe.ignoreTransaction(e):e).timeout(t||6e4);return k.trans?k.trans.waitFor(n):n},Promise:S,debug:{get:function(){return ae},set:function(e){$n(e)}},derive:Re,extend:H,props:Te,override:Bn,Events:Xe,on:ge,liveQuery:Cr,extendObservabilitySet:It,getByKeyPath:se,setByKeyPath:ee,delByKeyPath:Qr,shallowClone:jn,deepClone:xe,getObjectDiff:Dn,cmp:B,asap:Fn,minKey:tn,addons:[],connections:Ve,errnames:Ut,dependencies:Tt,cache:Ae,semVer:er,version:er.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),Pe.maxKey=tt(Pe.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ge(et,function(e){if(!be){var t;t=new CustomEvent(un,{detail:e}),be=!0,dispatchEvent(t),be=!1}}),addEventListener(un,function(e){var t=e.detail;be||Cn(t)}));function Cn(e){var t=be;try{be=!0,ge.storagemutated.fire(e),xn(e,!0)}finally{be=t}}var be=!1,we,kn=function(){};typeof BroadcastChannel<"u"&&(kn=function(){we=new BroadcastChannel(un),we.onmessage=function(e){return e.data&&Cn(e.data)}},kn(),typeof we.unref=="function"&&we.unref(),ge(et,function(e){be||we.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!fe.disableBfCache&&e.persisted){ae&&console.debug("Dexie: handling persisted pagehide"),we?.close();for(var t=0,n=Ve;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!fe.disableBfCache&&e.persisted&&(ae&&console.debug("Dexie: handling persisted pageshow"),kn(),Cn({all:new G(-1/0,[[]])}))}));function wa(e){return new Je({add:e})}function _a(e){return new Je({remove:e})}function xa(e,t){return new Je({replacePrefix:[e,t]})}S.rejectionMapper=ni,$n(ae);var Ea=Object.freeze({__proto__:null,Dexie:fe,liveQuery:Cr,Entity:rr,cmp:B,PropModification:Je,replacePrefix:xa,add:wa,remove:_a,default:fe,RangeSet:G,mergeRanges:it,rangesOverlap:yr});return C(fe,Ea,{default:fe}),fe})});function Fr($,M){let Z=!M?.manualCleanup?M?.injector?.get(Kn)??Ir(Kn):null,W=Ca(M?.equal),V;M?.requireSync?V=An({kind:0},{equal:W}):V=An({kind:1,value:M?.initialValue},{equal:W});let N,H=$.subscribe({next:X=>V.set({kind:1,value:X}),error:X=>{V.set({kind:2,error:X}),N?.()},complete:()=>{N?.()}});if(M?.requireSync&&V().kind===0)throw new In(601,!1);return N=Z?.onDestroy(H.unsubscribe.bind(H)),Mr(()=>{let X=V();switch(X.kind){case 1:return X.value;case 2:throw X.error;case 0:throw new In(601,!1)}},{equal:M?.equal})}function Ca($=Object.is){return(M,C)=>M.kind===1&&C.kind===1&&$(M.value,C.value)}var Mt=Oa(jr(),1),Lr=Symbol.for("Dexie"),Bt=globalThis[Lr]||(globalThis[Lr]=Mt.default);if(Mt.default.semVer!==Bt.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Mt.default.semVer} and ${Bt.semVer}`);var{liveQuery:Nr,mergeRanges:$a,rangesOverlap:Ya,RangeSet:Qa,cmp:Ha,Entity:Ga,PropModification:Xa,replacePrefix:qa,add:Ja,remove:Za,DexieYProvider:eo}=Bt;var Vr=Bt;var Ft=class{static MAIN_DB="mainDB";static MOOD_DB="moodDB"};var zr=class $ extends Vr{moodData;constructor(){super(Ft.MOOD_DB),this.version(1).stores({moodData:"++id, date"})}allMoodData=Fr(Nr(()=>{let{start:M,end:C}=this.getCurrentYearRange();return this.moodData.where("date").between(M,C,!0,!0).toArray()}));addMoodData(M){console.debug("Added in moodData table new entry",M),this.moodData.add(M)}getCurrentYearRange(){let M=new Date().getFullYear(),C=`${M}-01-01`,Z=`${M}-12-31`;return{start:C,end:Z}}async updateMoodData(M,C){try{await this.moodData.update(M,C),console.debug(`Updated record with id ${M}`,C)}catch(Z){console.error(`Error updating record with id ${M}:`,Z)}}async deleteMoodData(M){try{await this.moodData.delete(M),console.info(`Deleted record with id ${M}`)}catch(C){console.error(`Error deleting record with id ${M}:`,C)}}getAllMoodDataForExport(){return this.moodData.toArray()}async clearAllMoodData(){try{await this.moodData.clear(),console.info("All data has been deleted.")}catch(M){console.error("Error deleting all data:",M)}}static \u0275fac=function(C){return new(C||$)};static \u0275prov=kr({token:$,factory:$.\u0275fac,providedIn:"root"})};var Ia=["data-p-icon","chevron-right"],co=(()=>{class $ extends Br{static \u0275fac=(()=>{let C;return function(W){return(C||(C=Ar($)))(W||$)}})();static \u0275cmp=Pr({type:$,selectors:[["","data-p-icon","chevron-right"]],features:[Tr],attrs:Ia,decls:1,vars:0,consts:[["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(Z,W){Z&1&&(Kr(),Rr(0,"path",0))},encapsulation:2})}return $})();export{co as a,Fr as b,Nr as c,Vr as d,Ft as e,zr as f};
